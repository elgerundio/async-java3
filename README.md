Звіт до лабораторної роботи №2
Дисципліна: Асинхронне і багатопотокове програмування
Виконав: Гирич Андрій Андрійович, гр. КІ-23-1

Тема завдання
Розробити багатопотоковий застосунок для обчислення добутку двох матриць A (m×n) та B (n×k) з використанням пулів потоків. Кожен потік виконує розрахунок одного елемента результатної матриці C = A × B.

Особливості:

Потоки самостійно обирають наступний доступний елемент, дотримуючись визначеної логіки.

Якщо всі елементи обчислено, потік завершує свою роботу з повідомленням.

Головний потік виводить фінальний результат після завершення обчислень.

Виведення матриці C має бути відформатованим.

Методи реалізації
Програму реалізовано трьома способами:

Класичний пул потоків (ThreadPoolExecutor) – використання обмеженого пулу традиційних (kernel) потоків.

Віртуальні потоки без обмеження – створення окремого VirtualThread для кожної задачі без ліміту.

Віртуальні потоки з обмеженням – обмеження кількості віртуальних потоків за допомогою Semaphore відповідно до розміру класичного пулу.

Інструменти
Для точного вимірювання продуктивності використовувався JMH (Java Microbenchmark Harness), який дозволяє мінімізувати вплив JVM-оптимізацій та забезпечує достовірність вимірювань.

Результати вимірювань
| Benchmark                         | Matrix Size | Thread Pool Size | Mode | Iterations | Середній час | Похибка   | Одиниці |
| --------------------------------- | ----------- | ---------------- | ---- | ---------- | ------------ | --------- | ------- |
| MyBenchmark.threadPoolFixed       | 1000        | 4                | avgt | 10         | 672.137      | ± 430.211 | ms/op   |
| MyBenchmark.threadPoolFixed       | 1000        | 10               | avgt | 10         | 582.503      | ± 300.114 | ms/op   |
| MyBenchmark.virtualThreadsBound   | 1000        | 4                | avgt | 10         | 560.275      | ± 142.981 | ms/op   |
| MyBenchmark.virtualThreadsBound   | 1000        | 10               | avgt | 10         | 508.990      | ± 289.374 | ms/op   |
| MyBenchmark.virtualThreadsUnbound | 1000        | 4                | avgt | 10         | 452.114      | ± 274.879 | ms/op   |
| MyBenchmark.virtualThreadsUnbound | 1000        | 10               | avgt | 10         | 520.341      | ± 205.823 | ms/op   |
Аналіз
Найвищу продуктивність у більшості випадків показали віртуальні потоки без обмеження.

Використання обмеженого числа віртуальних потоків (через семафор) дозволяє контролювати навантаження, хоча втрачається частина переваг масштабування.

Традиційний пул потоків поступається в швидкодії обом варіантам з VirtualThreads, особливо при великій кількості операцій.

Висновки
Virtual Threads — ефективна альтернатива класичним потокам у задачах типу "одна операція — один потік", особливо коли таких операцій багато.

Обмеження кількості віртуальних потоків через Semaphore може бути корисним, якщо необхідно уникнути надмірного навантаження на систему.

Загалом, паралелізація з Virtual Threads значно зменшує час виконання порівняно з класичними ThreadPoolExecutor.
